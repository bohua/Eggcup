//Created by Bli on 2014/6/12.
#expense-detail-editor-form.modal-dialog.modal-lg(ng-controller="expenseDetailEditorController")
	div.modal-content
		div.modal-header
			button.close(type="button", data-dismiss="modal") &times;
			h4.modal-title 费用管理 &nbsp;
				small Details Management
		div.modal-body.container-fluid

			div.table-responsive
				table#expense-detail-editor-table.table.table-bordered
					thead
						tr
							th 费用时间
							th 费用金额
							th 支付方式
							th 摘要
							th 附件
					tfoot
						tr
							td
							td {{sumField('expense_expense')}}
							td
							td
							td

					tbody(editable-table)
						tr(ng-repeat="sub_item in dialog_data_model track by $index")
							td(edit-model="sub_item.expense_date", edit-type="date") {{sub_item.expense_date | date:'yyyy-MM-dd'}}
							td(edit-model="sub_item.expense_expense", edit-type="number") {{sub_item.expense_expense}}
							td(edit-model="sub_item.expense_method", edit-type="string") {{sub_item.expense_method}}
							td(edit-model="sub_item.expense_desc", edit-type="string") {{sub_item.expense_desc}}
							td(edit-disabled)
								a.attachment-token.label.cursor-pointer(ng-repeat="attach in sub_item.attachment", href="file-download/{{attach.file_url}}?givenName={{attach.file_name}}", download="{{attach.file_name}}")
									i.fa.text-info.fa-fw(class="{{translateFileType(attach.file_ext).icon}}") &nbsp;
									span {{attach.file_name}}



			table-content-handler(option="tableHandlerOption", model="dialog_data_model", table="#expense-detail-editor-table")

		div.modal-footer
			div.pull-left.alert-danger.panel(ng-show="prop.showErrorMessage")
				i.fa.fa-fw.fa-warning
				span 单据填写有误，请修正红色标记
			button.btn.btn-default(type="button", ng-click="Cancel()") 取消
			button.btn.btn-primary(type="button", ng-click="Confirm('update', true)", ng-if="prop.mode==='edit'") 保存
			button.btn.btn-primary(type="button", ng-click="openTask()", ng-if="prop.mode==='queryPop'") 打开任务



